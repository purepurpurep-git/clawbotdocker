services:
  clawbot-dev:
    build: .
    container_name: clawbot-dev
    env_file: .env
    environment:
      - UI_MODE=full
    volumes:
      - ./data:/data
      - ./workspace:/workspace
      # WSLg (Windows) GUI
      - /mnt/wslg:/mnt/wslg
      # X11 socket (Linux)
      - /tmp/.X11-unix:/tmp/.X11-unix
    ports:
      - "${HOST_PORT:-18789}:${GATEWAY_PORT:-18789}"
    profiles: ["dev"]

  clawbot-user:
    build: .
    container_name: clawbot-user
    env_file: .env
    environment:
      - UI_MODE=user
    volumes:
      - ./data:/data
      - ./workspace:/workspace
      - /mnt/wslg:/mnt/wslg
      - /tmp/.X11-unix:/tmp/.X11-unix
    ports:
      - "${HOST_PORT:-18789}:${GATEWAY_PORT:-18789}"
    profiles: ["user"]
